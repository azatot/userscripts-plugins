"use strict";function asyncGeneratorStep(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function _asyncToGenerator(i){return function(){var e=this,c=arguments;return new Promise(function(t,n){var r=i.apply(e,c);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Plugin=function(){String.prototype.withUTM=function(){return this+"?utm_source=mobile&amp;utm_medium=email"};var n;function e(e,t){return"string"!=typeof e?console.error("Cannot handle ".concat(_typeof(e)," as a property of state object, this parameter must be a string")):"function"!=typeof t?console.error("Cannot handle ".concat(_typeof(t)," as a callback, this parameter must be a function")):n.setState("page",e,t)}_objectDestructuringEmpty(n={state:{page:{topNav:null,topBanner:null,topTitle:null,sections:null},common:{currentSelectedSectionIndex:null,prevSelectedSectionIndex:"0",cardsPerSection:3},form:{heading:{topNav:null,topBanner:null,topTitle:null},cards:null,banner:null,reserved:{heading:{},section:{banner:{},cards:null}}}},getState:function(e){return e&&"string"!=typeof e?"error, not string":(!0===e&&console.log(this.state),this.state)},setState:function(e,t,n){var r=n();this.state["".concat(e)]=_objectSpread({},this.state["".concat(e)],_defineProperty({},"".concat(t),r))}}),e("topNav",function(){var e=document.querySelector("#top_nav").querySelectorAll("a");return Array.prototype.map.call(e,function(e){return e})}),e("topBanner",function(){return document.querySelector("#top_banner img")}),e("topTitle",function(){return document.querySelector("#top_heading")}),e("sections",function(){var a=[];return document.querySelectorAll(".section_start").forEach(function(e){for(var n={banner:e.querySelectorAll("a")[0],cards:[],bottomButton:null},t=[],r=e;!r.className.includes("section_end");r=r.nextElementSibling,0)t.push(r),r.nextElementSibling.className.includes("section_end")&&(n.bottomButton=r.querySelector("a"),t.push(r.nextElementSibling)),r.querySelector(".product")&&r.querySelectorAll(".product").forEach(function(e){var t={};t.img=e.querySelector("img"),t.name=e.querySelector("span"),t.newPrice=e.querySelectorAll("span")[1],t.oldPrice=e.querySelectorAll("span")[2],t.links=e.querySelectorAll("a"),n.cards.push(t)});n.allSectionTrs=t,a.push(n)}),a}),n.getState("_____STATE_____"),window.globalState=n;function a(e,n,t){function r(e,t){return document.querySelector("#plugin form").innerHTML="","\n             <h2>Секция ".concat(n,'</h2>\n             <div id="banner">\n                 <div>\n                    <label for="banner-link">Ссылка на баннер</label>\n                    <input value=').concat(e.link,' id="banner-link" type="text">\n                 </div>\n                 <div>\n                    <label for="banner-src">Адрес картинки баннера</label>\n                    <input value=').concat(e.src,' id="banner-src"  type="text">\n                 </div>\n            </div>\n             <hr>\n             <h3>Товар 1</h3>\n             <div id="card1" class="form-card">\n                 <div>\n                    <label for="card1-img">URL-адрес картинки</label>\n                    <input value=').concat(t[0].img,' id="card1-img" type="text">\n                 </div>\n                 <div>\n                    <label for="card1-name">Название товара</label>\n                    <textarea id="card1-name">').concat(t[0].name,'</textarea>\n                    </div>\n                 <div>\n                    <label for="card1-newPrice">Новая цена</label>\n                    <input value=').concat(t[0].newPrice,' id="card1-newPrice" type="text">\n                 </div>\n                 <div>\n                    <label for="card1-oldPrice">Старая цена</label>\n                    <input value=').concat(t[0].oldPrice,' id="card1-oldPrice" type="text">\n                 </div>\n                 <div>\n                    <label for="card1-href">Ссылка на товар</label>\n                    <input value=').concat(t[0].link,' id="card1-href" type="text">\n                 </div>\n             </div>\n              <hr>\n             <h3>Товар 2</h3>\n             <div id="card2" class="form-card">\n                 <div>\n                    <label for="card2-img">URL-адрес картинки</label>\n                    <input value=').concat(t[1].img,' id="card2-img" type="text">\n                 </div>\n                 <div>\n                    <label for="card2-name">Название товара</label>\n                    <textarea id="card2-name">').concat(t[1].name,'</textarea>\n                 </div>\n                  <div>\n                    <label for="card2-newPrice">Новая цена</label>\n                    <input value=').concat(t[1].newPrice,' id="card2-newPrice" type="text">\n                 </div>\n                 <div>\n                    <label for="card2-oldPrice">Старая цена</label>\n                    <input value=').concat(t[1].oldPrice,' id="card2-oldPrice" type="text">\n                 </div>\n                 <div>\n                    <label for="card2-href">Ссылка на товар</label>\n                    <input value=').concat(t[1].link,' id="card2-href" type="text">\n                 </div>\n             </div>\n                <hr>\n              <h3>Товар 3</h3>\n             <div id="card3" class="form-card">\n                 <div>\n                    <label for="card3-img">URL-адрес картинки</label>\n                    <input value=').concat(t[2].img,' id="card3-img" type="text">\n                 </div>\n                 <div>\n                    <label for="card3-name">Название товара</label>\n                    <textarea id="card3-name">').concat(t[2].name,'</textarea>\n                 </div>\n                  <div>\n                    <label for="card3-newPrice">Новая цена</label>\n                    <input value=').concat(t[2].newPrice,' id="card3-newPrice" type="text">\n                 </div>\n                 <div>\n                    <label for="card3-oldPrice">Старая цена</label>\n                    <input value=').concat(t[2].oldPrice,' id="card3-oldPrice" type="text">\n                 </div>\n                 <div>\n                    <label for="card3-href">Ссылка на товар</label>\n                    <input value=').concat(t[2].link,' id="card3-href" type="text">\n                 </div>\n             </div>\n             <hr>\n             <div class="innerButtons">\n                <button id="paste" class="button" type="submit">Вставить</button>\n                <button id="clear" class="button" type="button">Очистить</button>\n                <button id="undo" class="button" type="button">Вернуть</button>\n                <button id="delete" class="button" type="button">Удалить</button>\n             </div>')}if(!0!==(2<arguments.length&&void 0!==t&&t)){var a=e.banner,o=e.cards,c={link:a.href,src:a.querySelector("img").src},i=o.map(function(e){return _objectSpread({},e,{img:e.img.src,name:e.name.innerText.trim(),newPrice:e.newPrice.innerText.trim(),oldPrice:e.oldPrice.innerText.trim(),link:e.links[0].href})});document.querySelector("#plugin form").innerHTML=r(c,i)}else{var l=e.section,u=l.banner,d=l.cards.map(function(e){return _objectSpread({},e,{img:e.img,name:e.name,newPrice:e.newPrice,oldPrice:e.oldPrice,link:e.href})});document.querySelector("#plugin form").innerHTML=r(u,d)}}function o(e,t){function n(e){var t=e.topNavNames,n=e.topNavLinks,r=e.topBanner,a=e.topTitle;return document.querySelector("#plugin form").innerHTML="",'\n             <h2>Оглавление</h2>\n             <div id="categories">\n                 <div id="1_cat">\n                    <label for="1_category-name">Категория 1</label>\n                    <textarea id="1_category-name" >'.concat(t[0],'</textarea>\n                    <label for="1_category-link">Ссылка на категорию 1</label>\n                    <input value=').concat(n[0],' id="1_category-link"  type="text">\n                 </div>\n                 <div id="2_cat">\n                    <label for="2_category-name">Категория 2</label>\n                    <textarea id="2_category-name" >').concat(t[1],'</textarea>\n                    <label for="2_category-link">Ссылка на категорию 2</label>\n                    <input value=').concat(n[1],' id="2_category-link"  type="text">\n                 </div>\n                 <div id="3_cat">\n                    <label for="3_category-name">Категория 3</label>\n                    <textarea id="3_category-name" >').concat(t[2],'</textarea>\n                    <label for="3_category-link">Ссылка на категорию 3</label>\n                    <input value=').concat(n[2],' id="3_category-link"  type="text">\n                 </div>\n                 <div id="4_cat">\n                    <label for="4_category-name">Категория 4</label>\n                    <textarea id="4_category-name" >').concat(t[3],'</textarea>\n                    <label for="4_category-link">Ссылка на категорию 4</label>\n                    <input value=').concat(n[3],' id="4_category-link"  type="text">\n                 </div>\n                  <div id="5_cat">\n                    <label for="5_category-name">Категория 5</label>\n                    <textarea id="5_category-name" >').concat(t[4],'</textarea>\n                    <label for="5_category-link">Ссылка на категорию 5</label>\n                    <input value=').concat(n[4],' id="5_category-link"  type="text">\n                 </div>\n                 <div>\n                    <label for="banner-src">Адрес картинки баннера</label>\n                    <input value=').concat(r.src,' id="banner-src"  type="text">\n                 </div>\n                 <div>\n                    <label for="heading-title">Заголовок рассылки</label>\n                    <textarea id="heading-title">').concat(a.text,'</textarea>\n                 </div>\n            </div>\n             <div class="innerButtons">\n                <button id="paste" class="button" type="submit">Вставить</button>\n                <button id="clear" class="button" type="button">Очистить</button>\n                <button id="undo" class="button" type="button">Вернуть</button>\n                \x3c!--       MUST BE HIDDEN, DON\'T TOUCH         --\x3e\n                <button id="delete" class="button hidden" type="button">Удалить</button>\n             </div>')}if(!0!==(1<arguments.length&&void 0!==t&&t)){var r={topNavNames:[],topNavLinks:[],topBanner:{src:null},topTitle:{text:null}},a=r.topNavNames,o=r.topNavLinks,c=r.topBanner;r.topTitle.text=e.topTitle.innerText,e.topNav.forEach(function(e){a.push(e.innerText),o.push(e.href)}),c.src=e.topBanner.src,document.querySelector("#plugin form").innerHTML=n(r)}else{var i={topNavNames:e.topNav.topNavNames,topNavLinks:e.topNav.topNavLinks,topBanner:{src:e.topBanner},topTitle:e.topTitle};console.log(i),document.querySelector("#plugin form").innerHTML=n(i)}}document.querySelectorAll(".top-buttons .button").forEach(function(r){r.onclick=function(){var e=this,t=globalState.getState().common.currentSelectedSectionIndex,n=globalState.getState().common.prevSelectedSectionIndex;globalState.setState("common","prevSelectedSectionIndex",function(){return n=t,String(n)}),globalState.setState("common","currentSelectedSectionIndex",function(){return String(e.id[0])}),this.classList.toggle("active"),document.getElementById("".concat(n,"_sect"))&&document.getElementById("".concat(n,"_sect")).classList.toggle("active"),"heading"===r.id?(o(globalState.getState().page),u(!0)):(a(globalState.getState().page.sections[this.id[0]],parseInt(this.id[0])+1),l(!0),i(!0)),d()}});function t(e){if("section"===e){var t=globalState.getState().common.currentSelectedSectionIndex,n=globalState.getState().page.sections[t],r=globalState.getState().form;n.cards.forEach(function(e,t){e.img.src=r.cards[t].img,e.name.innerText=r.cards[t].name,e.newPrice.innerText=r.cards[t].newPrice+" грн",e.oldPrice.innerText=r.cards[t].oldPrice+" грн",e.links.forEach(function(e){return e.href=r.cards[t].href.withUTM()})});var a=r.banner.link.withUTM();n.banner.href=a.withUTM(),n.bottomButton.href=a.withUTM(),n.banner.querySelector("img").src=r.banner.src}else if("heading"===e){var o=globalState.getState().page,c=o.topNav,i=o.topBanner,l=o.topTitle,u=globalState.getState().form.heading;c.forEach(function(e,t){e.innerText=u.topNav.topNavNames[t],e.href=u.topNav.topNavLinks[t].withUTM()}),i.src=u.topBanner,l.querySelector("span").innerText=u.topTitle.text}}function c(e,n){e.forEach(function(e){var t="".concat(e.id.split("-")[1]);n[t]=e.value})}var i=function(e){var t={},n=document.querySelectorAll("#plugin #banner input");globalState.setState("form","banner",function(){return c(n,t),!0===e&&(globalState.state.form.reserved.section.banner=t),t})},l=function(n){var r=[];document.querySelectorAll("#plugin .form-card").forEach(function(e){var t=e.querySelectorAll("input, textarea");globalState.setState("form","cards",function(){var e={};return c(t,e),r.push(e),!0===n&&(globalState.state.form.reserved.section.cards=r),r})})},u=function(e){var t={topNav:{topNavNames:[],topNavLinks:[]},topBanner:null,topTitle:{text:null}},n=document.querySelectorAll('#plugin_form div[id$="_cat"]');globalState.setState("form","heading",function(){return n.forEach(function(e){e.querySelectorAll("input, textarea").forEach(function(e){e.id.includes("name")?t.topNav.topNavNames.push(e.value):e.id.includes("link")&&t.topNav.topNavLinks.push(e.value)})}),t.topBanner=document.querySelector("#plugin_form #banner-src").value,t.topTitle.text=document.querySelector("#plugin_form #heading-title").value,!0===e&&(globalState.state.form.reserved.heading=t),t})},d=function r(){"h"===globalState.getState().common.currentSelectedSectionIndex?u(!1):(i(!1),l(!1)),document.querySelector("#plugin_form").onsubmit=function(e){e.preventDefault(),r(),"h"===globalState.getState().common.currentSelectedSectionIndex?(u(!1),t("heading")):(i(!1),l(!1),t("section"))},document.querySelector("#plugin_form #undo").onclick=function(){if("h"===globalState.getState().common.currentSelectedSectionIndex){var e=globalState.getState().form.reserved.heading;o(e,!0),r()}else{var t=globalState.getState().form.reserved,n=Number(globalState.getState().common.currentSelectedSectionIndex)+1;a(t,n,!0),r()}},document.querySelector("#plugin_form #clear").onclick=function(){document.querySelectorAll("#plugin_form input, textarea").forEach(function(e){return e.value=null})},document.querySelector("#plugin_form #delete").onclick=function(){var e=globalState.getState().page.sections,t=globalState.getState().common.currentSelectedSectionIndex;e[t].allSectionTrs.forEach(function(e){return e.remove()}),document.querySelectorAll(".top-buttons .section-button").forEach(function(e){e.id[0]===t&&e.remove()})}};document.querySelector("#copy_html").onclick=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.innerText="Копируем...",e.next=4,navigator.clipboard.writeText(document.querySelector("#table_root").innerHTML);case 4:console.log("Page URL copied to clipboard"),this.innerText="HTML успешно скопирован в буфер",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to copy: ",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()};Plugin();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNpbmctbG9naWMuanMiXSwibmFtZXMiOlsiUGx1Z2luIiwiU3RyaW5nIiwicHJvdG90eXBlIiwid2l0aFVUTSIsInRoaXMiLCJnbG9iYWxTdGF0ZSIsInNldFBhZ2VTdGF0ZSIsInByb3AiLCJjYWxsYmFjayIsImdldFN0YXRlIiwiY29uc29sZSIsImVycm9yIiwiY29uY2F0IiwiX3R5cGVvZiIsImFkZGl0aW9uYWwiLCJzZXRTdGF0ZSIsIm5ld1ZhbHVlIiwic3RhdGUiLCJwYWdlIiwidG9wTmF2IiwidG9wQmFubmVyIiwidG9wVGl0bGUiLCJzZWN0aW9ucyIsImNvbW1vbiIsImN1cnJlbnRTZWxlY3RlZFNlY3Rpb25JbmRleCIsInByZXZTZWxlY3RlZFNlY3Rpb25JbmRleCIsImNhcmRzUGVyU2VjdGlvbiIsImZvcm0iLCJoZWFkaW5nIiwic3RhcnRQYXJzaW5nIiwiY2FyZHMiLCJiYW5uZXIiLCJyZXNlcnZlZCIsInNlY3Rpb24iLCJsb2ciLCJwYXJlbnRQcm9wIiwiY2hpbGRQcm9wIiwiX29iamVjdFNwcmVhZCIsIl9kZWZpbmVQcm9wZXJ0eSIsImxpbmtzTm9kZUxpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiQXJyYXkiLCJlbCIsImZvckVhY2giLCJsb2NhbE9iaiIsImFsbFNlY3Rpb25UcnMiLCJlbGVtZW50IiwiY2xhc3NOYW1lIiwiaW5jbHVkZXMiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJpIiwicHVzaCIsImJvdHRvbUJ1dHRvbiIsInByb2R1Y3QiLCJjYXJkIiwiaW1nIiwibmFtZSIsIm5ld1ByaWNlIiwibGlua3MiLCJ3aW5kb3ciLCJudW1iZXIiLCJsaW5rIiwic3JjIiwicmVuZGVyRm9ybUNvbXBvbmVudCIsIm9sZFByaWNlIiwiaW5uZXJUZXh0IiwidHJpbSIsImlubmVySFRNTCIsImhyZWYiLCJyZW5kZXJIZWFkaW5nRm9ybSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInRvcE5hdk5hbWVzIiwidG9wTmF2TGlua3MiLCJtYXAiLCJ2YWx1ZXNPYmoiLCJiYW5uZXJWYWx1ZXMiLCJtYXBwZWRDYXJkcyIsInNlY3Rpb25CdXR0b25zIiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JtVmFsdWVzIiwidGV4dCIsImEiLCJjcmVhdGVLZXlOYW1lc0Zyb21JZCIsIm9iaiIsImtleU5hbWVGcm9tSWQiLCJvYmpUb1BvcHVsYXRlIiwic2V0Rm9ybUJhbm5lciIsImJhbm5lcklucHV0cyIsInNldEZvcm1DYXJkcyIsIm9uY2xpY2siLCJfdGhpcyIsImN1cnJlbnQiLCJwcmV2IiwiaW5wdXRzIiwid2l0aFJlc2VydmUiLCJ2YWx1ZXMiLCJpZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInNldEZvcm1IZWFkaW5nIiwicGFyc2VJbnQiLCJwYXJzZUZvcm1WYWx1ZXMiLCJoZWFkaW5nT2JqIiwidHlwZSIsImN1cnJlbnRTZWN0aW9uSW5kZXgiLCJzZWN0aW9uT2JqIiwic2VjdGlvbkxpbmsiLCJvbnN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiX2dsb2JhbFN0YXRlJGdldFN0YXRlIiwiaW5zZXJ0VmFsdWVzVG9QYWdlIiwic3BsaXQiLCJpbnB1dCIsInZhbHVlIiwiYmFubmVyT2JqIiwic2VsZWN0ZWRTZWN0aW9uIiwicmVtb3ZlIiwiY2F0ZWdvcmllc1NldHMiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJzZXQiLCJmaWVsZCIsImV2ZW50IiwiY3VycmVudFNlY3Rpb24iLCJOdW1iZXIiLCJidG4iLCJfcmVmMiIsIl9hc3luY1RvR2VuZXJhdG9yIiwicmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJ3cmFwIiwiX2NvbnRleHQiLCJuZXh0Iiwid3JpdGVUZXh0IiwidDAiLCJzdG9wIiwiX3giLCJhcHBseSJdLCJtYXBwaW5ncyI6IjI4Q0FBQSxJQUFNQSxPQUFTLFdBRVhDLE9BQU9DLFVBQVVDLFFBQVUsV0FDdkIsT0FBT0MsS0FBTywyQ0FFbEIsSUFDUUMsRUFBYyxT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LEdBQUEsSUFBQSxNQUFBLE9BQUFILEVBQUFJLFNBQUFOLEVBQUFsSSxLQUFBLENBQUEsQ0FBQSxFQUFBLFFBQS9DLE9BQUEsU0FBQXlJLEdBQUEsT0FBQVgsRUFBQVksTUFBQTFJLEtBQUFvRSxZQUFBLElBV0p4RSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUGx1Z2luID0gKCkgPT4ge1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQQVJTSU5HIExPR0lDIFNUQVJUIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuICAgIFN0cmluZy5wcm90b3R5cGUud2l0aFVUTSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgKyAnP3V0bV9zb3VyY2U9bW9iaWxlJmFtcDt1dG1fbWVkaXVtPWVtYWlsJztcbiAgICB9O1xuICAgIGNvbnN0IHN0YXJ0UGFyc2luZyA9ICgpID0+IHtcbiAgICAgICAgbGV0IGdsb2JhbFN0YXRlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHtcbiAgICAgICAgICAgICAgICBcInBhZ2VcIjoge1xuICAgICAgICAgICAgICAgICAgICBcInRvcE5hdlwiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBcInRvcEJhbm5lclwiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBcInRvcFRpdGxlXCI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIFwic2VjdGlvbnNcIjogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJjb21tb25cIjoge1xuICAgICAgICAgICAgICAgICAgICAnY3VycmVudFNlbGVjdGVkU2VjdGlvbkluZGV4JzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgJ3ByZXZTZWxlY3RlZFNlY3Rpb25JbmRleCc6ICcwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2NhcmRzUGVyU2VjdGlvbic6IDNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwiZm9ybVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiaGVhZGluZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvcE5hdlwiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3BCYW5uZXJcIjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG9wVGl0bGVcIjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXCJjYXJkc1wiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBcImJhbm5lclwiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBcInJlc2VydmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaGVhZGluZ1wiOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2VjdGlvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYW5uZXJcIjoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXJkc1wiOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRTdGF0ZTogZnVuY3Rpb24gKGFkZGl0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbCAmJiB0eXBlb2YgYWRkaXRpb25hbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3IsIG5vdCBzdHJpbmdcIlxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWRkaXRpb25hbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0U3RhdGU6IGZ1bmN0aW9uIChwYXJlbnRQcm9wLCBjaGlsZFByb3AsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW2Ake3BhcmVudFByb3B9YF0gPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuc3RhdGVbYCR7cGFyZW50UHJvcH1gXSxcbiAgICAgICAgICAgICAgICAgICAgW2Ake2NoaWxkUHJvcH1gXTogbmV3VmFsdWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZXRQYWdlU3RhdGUgPSAocHJvcCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihgQ2Fubm90IGhhbmRsZSAke3R5cGVvZiBwcm9wfSBhcyBhIHByb3BlcnR5IG9mIHN0YXRlIG9iamVjdCwgdGhpcyBwYXJhbWV0ZXIgbXVzdCBiZSBhIHN0cmluZ2ApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGBDYW5ub3QgaGFuZGxlICR7dHlwZW9mIGNhbGxiYWNrfSBhcyBhIGNhbGxiYWNrLCB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGEgZnVuY3Rpb25gKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdsb2JhbFN0YXRlLnNldFN0YXRlKCdwYWdlJywgcHJvcCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBGb3IgcGFyc2luZyBhbGwgdmFyaWFibGVzIGZyb20gcGFnZSBhbmQgc2V0dGluZyB0aGVtIHRvIHN0YXRlXG4gICAgICAgIC8vICghISBzdGFydGluZyBieSBkZWZhdWx0IG9uIHBhZ2UgbG9hZCAhISlcbiAgICAgICAgKCh7fSkgPT4ge1xuICAgICAgICAgICAgLy8gLS0tLS0gUEFSU0lORyBIRUFESU5HIE5BVklHQVRJT04gRlJPTSBQQUdFIC0tLS0tIC8vXG4gICAgICAgICAgICBzZXRQYWdlU3RhdGUoJ3RvcE5hdicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdG9wTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvcF9uYXYnKTtcbiAgICAgICAgICAgICAgICBsZXQgbGlua3NOb2RlTGlzdCA9IHRvcE5hdi5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChsaW5rc05vZGVMaXN0LCAoZWwgPT4gZWwpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gLS0tLS0gUEFSU0lORyBIRUFESU5HIEJBTk5FUiBGUk9NIFBBR0UgLS0tLS0gLy9cbiAgICAgICAgICAgIHNldFBhZ2VTdGF0ZSgndG9wQmFubmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9wX2Jhbm5lciBpbWcnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyAtLS0tLSBQQVJTSU5HIEhFQURJTkcgVElUTEUgRlJPTSBQQUdFIC0tLS0tIC8vXG4gICAgICAgICAgICBzZXRQYWdlU3RhdGUoJ3RvcFRpdGxlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9wX2hlYWRpbmcnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gLS0tLS0gUEFSU0lORyBTRUNUSU9OUyBTRVRTIEZST00gUEFHRSAtLS0tLSAvL1xuICAgICAgICAgICAgc2V0UGFnZVN0YXRlKCdzZWN0aW9ucycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb25fc3RhcnQnKTtcbiAgICAgICAgICAgICAgICBzdGFydHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxvY2FsT2JqID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVyOiBlbC5xdWVyeVNlbGVjdG9yQWxsKCdhJylbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b21CdXR0b246IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFsbFNlY3Rpb25UcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCA9IGVsLCBpID0gMDsgIShlbGVtZW50LmNsYXNzTmFtZS5pbmNsdWRlcygnc2VjdGlvbl9lbmQnKSk7IGVsZW1lbnQgPSBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZywgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxTZWN0aW9uVHJzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NOYW1lLmluY2x1ZGVzKCdzZWN0aW9uX2VuZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxPYmouYm90dG9tQnV0dG9uID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsU2VjdGlvblRycy5wdXNoKGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdCcpLmZvckVhY2gocHJvZHVjdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYXJkID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuaW1nID0gcHJvZHVjdC5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5uYW1lID0gcHJvZHVjdC5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQubmV3UHJpY2UgPSBwcm9kdWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4nKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5vbGRQcmljZSA9IHByb2R1Y3QucXVlcnlTZWxlY3RvckFsbCgnc3BhbicpWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkLmxpbmtzID0gcHJvZHVjdC5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsT2JqLmNhcmRzLnB1c2goY2FyZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2NhbE9iai5hbGxTZWN0aW9uVHJzID0gYWxsU2VjdGlvblRycztcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaChsb2NhbE9iailcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY3Rpb25zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKGdsb2JhbFN0YXRlKTtcbiAgICAgICAgZ2xvYmFsU3RhdGUuZ2V0U3RhdGUoXCJfX19fX1NUQVRFX19fX19cIik7XG4gICAgICAgIHdpbmRvdy5nbG9iYWxTdGF0ZSA9IGdsb2JhbFN0YXRlO1xuICAgIH07XG4gICAgc3RhcnRQYXJzaW5nKCk7XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBBUlNJTkcgTE9HSUMgRU5EICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRUxFTUVOVFMgQ1JFQVRJTkcgU1RBUlQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG4gICAgbGV0IHJlbmRlckZvcm1Db21wb25lbnQgPSAoc2VjdGlvbiwgbnVtYmVyLCBmcm9tUmVzZXJ2ZWQgPSBmYWxzZSkgPT4ge1xuICAgICAgICBsZXQgZm9ybSA9IChiYW5uZXIsIGNhcmRzKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGx1Z2luIGZvcm0nKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgPGgyPtCh0LXQutGG0LjRjyAke251bWJlcn08L2gyPlxuICAgICAgICAgICAgIDxkaXYgaWQ9XCJiYW5uZXJcIj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImJhbm5lci1saW5rXCI+0KHRgdGL0LvQutCwINC90LAg0LHQsNC90L3QtdGAPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7YmFubmVyLmxpbmt9IGlkPVwiYmFubmVyLWxpbmtcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImJhbm5lci1zcmNcIj7QkNC00YDQtdGBINC60LDRgNGC0LjQvdC60Lgg0LHQsNC90L3QtdGA0LA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9JHtiYW5uZXIuc3JjfSBpZD1cImJhbm5lci1zcmNcIiAgdHlwZT1cInRleHRcIj5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICA8aHI+XG4gICAgICAgICAgICAgPGgzPtCi0L7QstCw0YAgMTwvaDM+XG4gICAgICAgICAgICAgPGRpdiBpZD1cImNhcmQxXCIgY2xhc3M9XCJmb3JtLWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQxLWltZ1wiPlVSTC3QsNC00YDQtdGBINC60LDRgNGC0LjQvdC60Lg8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9JHtjYXJkc1swXS5pbWd9IGlkPVwiY2FyZDEtaW1nXCIgdHlwZT1cInRleHRcIj5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjYXJkMS1uYW1lXCI+0J3QsNC30LLQsNC90LjQtSDRgtC+0LLQsNGA0LA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9XCJjYXJkMS1uYW1lXCI+JHtjYXJkc1swXS5uYW1lfTwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2FyZDEtbmV3UHJpY2VcIj7QndC+0LLQsNGPINGG0LXQvdCwPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMF0ubmV3UHJpY2V9IGlkPVwiY2FyZDEtbmV3UHJpY2VcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQxLW9sZFByaWNlXCI+0KHRgtCw0YDQsNGPINGG0LXQvdCwPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMF0ub2xkUHJpY2V9IGlkPVwiY2FyZDEtb2xkUHJpY2VcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQxLWhyZWZcIj7QodGB0YvQu9C60LAg0L3QsCDRgtC+0LLQsNGAPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMF0ubGlua30gaWQ9XCJjYXJkMS1ocmVmXCIgdHlwZT1cInRleHRcIj5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxocj5cbiAgICAgICAgICAgICA8aDM+0KLQvtCy0LDRgCAyPC9oMz5cbiAgICAgICAgICAgICA8ZGl2IGlkPVwiY2FyZDJcIiBjbGFzcz1cImZvcm0tY2FyZFwiPlxuICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2FyZDItaW1nXCI+VVJMLdCw0LTRgNC10YEg0LrQsNGA0YLQuNC90LrQuDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT0ke2NhcmRzWzFdLmltZ30gaWQ9XCJjYXJkMi1pbWdcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQyLW5hbWVcIj7QndCw0LfQstCw0L3QuNC1INGC0L7QstCw0YDQsDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cImNhcmQyLW5hbWVcIj4ke2NhcmRzWzFdLm5hbWV9PC90ZXh0YXJlYT5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2FyZDItbmV3UHJpY2VcIj7QndC+0LLQsNGPINGG0LXQvdCwPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMV0ubmV3UHJpY2V9IGlkPVwiY2FyZDItbmV3UHJpY2VcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQyLW9sZFByaWNlXCI+0KHRgtCw0YDQsNGPINGG0LXQvdCwPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMV0ub2xkUHJpY2V9IGlkPVwiY2FyZDItb2xkUHJpY2VcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQyLWhyZWZcIj7QodGB0YvQu9C60LAg0L3QsCDRgtC+0LLQsNGAPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMV0ubGlua30gaWQ9XCJjYXJkMi1ocmVmXCIgdHlwZT1cInRleHRcIj5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGhyPlxuICAgICAgICAgICAgICA8aDM+0KLQvtCy0LDRgCAzPC9oMz5cbiAgICAgICAgICAgICA8ZGl2IGlkPVwiY2FyZDNcIiBjbGFzcz1cImZvcm0tY2FyZFwiPlxuICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2FyZDMtaW1nXCI+VVJMLdCw0LTRgNC10YEg0LrQsNGA0YLQuNC90LrQuDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT0ke2NhcmRzWzJdLmltZ30gaWQ9XCJjYXJkMy1pbWdcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQzLW5hbWVcIj7QndCw0LfQstCw0L3QuNC1INGC0L7QstCw0YDQsDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cImNhcmQzLW5hbWVcIj4ke2NhcmRzWzJdLm5hbWV9PC90ZXh0YXJlYT5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2FyZDMtbmV3UHJpY2VcIj7QndC+0LLQsNGPINGG0LXQvdCwPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMl0ubmV3UHJpY2V9IGlkPVwiY2FyZDMtbmV3UHJpY2VcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQzLW9sZFByaWNlXCI+0KHRgtCw0YDQsNGPINGG0LXQvdCwPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMl0ub2xkUHJpY2V9IGlkPVwiY2FyZDMtb2xkUHJpY2VcIiB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhcmQzLWhyZWZcIj7QodGB0YvQu9C60LAg0L3QsCDRgtC+0LLQsNGAPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7Y2FyZHNbMl0ubGlua30gaWQ9XCJjYXJkMy1ocmVmXCIgdHlwZT1cInRleHRcIj5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgPGhyPlxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbm5lckJ1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwicGFzdGVcIiBjbGFzcz1cImJ1dHRvblwiIHR5cGU9XCJzdWJtaXRcIj7QktGB0YLQsNCy0LjRgtGMPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNsZWFyXCIgY2xhc3M9XCJidXR0b25cIiB0eXBlPVwiYnV0dG9uXCI+0J7Rh9C40YHRgtC40YLRjDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ1bmRvXCIgY2xhc3M9XCJidXR0b25cIiB0eXBlPVwiYnV0dG9uXCI+0JLQtdGA0L3Rg9GC0Yw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiZGVsZXRlXCIgY2xhc3M9XCJidXR0b25cIiB0eXBlPVwiYnV0dG9uXCI+0KPQtNCw0LvQuNGC0Yw8L2J1dHRvbj5cbiAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgIH07XG4gICAgICAgIGlmICghKGZyb21SZXNlcnZlZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgIGxldCB7YmFubmVyLCBjYXJkc30gPSBzZWN0aW9uO1xuICAgICAgICAgICAgbGV0IGJhbm5lclZhbHVlcyA9IHtcbiAgICAgICAgICAgICAgICBsaW5rOiBiYW5uZXIuaHJlZixcbiAgICAgICAgICAgICAgICBzcmM6IGJhbm5lci5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zcmMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IG1hcHBlZENhcmRzID0gY2FyZHMubWFwKGNhcmQgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNhcmQsXG4gICAgICAgICAgICAgICAgICAgIGltZzogY2FyZC5pbWcuc3JjLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjYXJkLm5hbWUuaW5uZXJUZXh0LnRyaW0oKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3UHJpY2U6IGNhcmQubmV3UHJpY2UuaW5uZXJUZXh0LnRyaW0oKSxcbiAgICAgICAgICAgICAgICAgICAgb2xkUHJpY2U6IGNhcmQub2xkUHJpY2UuaW5uZXJUZXh0LnRyaW0oKSxcbiAgICAgICAgICAgICAgICAgICAgbGluazogY2FyZC5saW5rc1swXS5ocmVmXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGx1Z2luIGZvcm0nKS5pbm5lckhUTUwgPSBmb3JtKGJhbm5lclZhbHVlcywgbWFwcGVkQ2FyZHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHtiYW5uZXIsIGNhcmRzfSA9IHNlY3Rpb24uc2VjdGlvbjtcbiAgICAgICAgICAgIGxldCBtYXBwZWRDYXJkcyA9IGNhcmRzLm1hcChjYXJkID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jYXJkLFxuICAgICAgICAgICAgICAgICAgICBpbWc6IGNhcmQuaW1nLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjYXJkLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG5ld1ByaWNlOiBjYXJkLm5ld1ByaWNlLFxuICAgICAgICAgICAgICAgICAgICBvbGRQcmljZTogY2FyZC5vbGRQcmljZSxcbiAgICAgICAgICAgICAgICAgICAgbGluazogY2FyZC5ocmVmXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGx1Z2luIGZvcm0nKS5pbm5lckhUTUwgPSBmb3JtKGJhbm5lciwgbWFwcGVkQ2FyZHMpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxldCByZW5kZXJIZWFkaW5nRm9ybSA9IChvYmosIGZyb21SZXNlcnZlZCA9IGZhbHNlKSA9PiB7XG4gICAgICAgIGxldCBmb3JtID0gKHZhbHVlc09iaikgPT4ge1xuICAgICAgICAgICAgbGV0IHt0b3BOYXZOYW1lcywgdG9wTmF2TGlua3MsIHRvcEJhbm5lciwgdG9wVGl0bGV9ID0gdmFsdWVzT2JqO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsdWdpbiBmb3JtJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgIDxoMj7QntCz0LvQsNCy0LvQtdC90LjQtTwvaDI+XG4gICAgICAgICAgICAgPGRpdiBpZD1cImNhdGVnb3JpZXNcIj5cbiAgICAgICAgICAgICAgICAgPGRpdiBpZD1cIjFfY2F0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCIxX2NhdGVnb3J5LW5hbWVcIj7QmtCw0YLQtdCz0L7RgNC40Y8gMTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cIjFfY2F0ZWdvcnktbmFtZVwiID4ke3RvcE5hdk5hbWVzWzBdfTwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCIxX2NhdGVnb3J5LWxpbmtcIj7QodGB0YvQu9C60LAg0L3QsCDQutCw0YLQtdCz0L7RgNC40Y4gMTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT0ke3RvcE5hdkxpbmtzWzBdfSBpZD1cIjFfY2F0ZWdvcnktbGlua1wiICB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdiBpZD1cIjJfY2F0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCIyX2NhdGVnb3J5LW5hbWVcIj7QmtCw0YLQtdCz0L7RgNC40Y8gMjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cIjJfY2F0ZWdvcnktbmFtZVwiID4ke3RvcE5hdk5hbWVzWzFdfTwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCIyX2NhdGVnb3J5LWxpbmtcIj7QodGB0YvQu9C60LAg0L3QsCDQutCw0YLQtdCz0L7RgNC40Y4gMjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT0ke3RvcE5hdkxpbmtzWzFdfSBpZD1cIjJfY2F0ZWdvcnktbGlua1wiICB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdiBpZD1cIjNfY2F0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCIzX2NhdGVnb3J5LW5hbWVcIj7QmtCw0YLQtdCz0L7RgNC40Y8gMzwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cIjNfY2F0ZWdvcnktbmFtZVwiID4ke3RvcE5hdk5hbWVzWzJdfTwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCIzX2NhdGVnb3J5LWxpbmtcIj7QodGB0YvQu9C60LAg0L3QsCDQutCw0YLQtdCz0L7RgNC40Y4gMzwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT0ke3RvcE5hdkxpbmtzWzJdfSBpZD1cIjNfY2F0ZWdvcnktbGlua1wiICB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdiBpZD1cIjRfY2F0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCI0X2NhdGVnb3J5LW5hbWVcIj7QmtCw0YLQtdCz0L7RgNC40Y8gNDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cIjRfY2F0ZWdvcnktbmFtZVwiID4ke3RvcE5hdk5hbWVzWzNdfTwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCI0X2NhdGVnb3J5LWxpbmtcIj7QodGB0YvQu9C60LAg0L3QsCDQutCw0YLQtdCz0L7RgNC40Y4gNDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT0ke3RvcE5hdkxpbmtzWzNdfSBpZD1cIjRfY2F0ZWdvcnktbGlua1wiICB0eXBlPVwidGV4dFwiPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCI1X2NhdFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiNV9jYXRlZ29yeS1uYW1lXCI+0JrQsNGC0LXQs9C+0YDQuNGPIDU8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9XCI1X2NhdGVnb3J5LW5hbWVcIiA+JHt0b3BOYXZOYW1lc1s0XX08L3RleHRhcmVhPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiNV9jYXRlZ29yeS1saW5rXCI+0KHRgdGL0LvQutCwINC90LAg0LrQsNGC0LXQs9C+0YDQuNGOIDU8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9JHt0b3BOYXZMaW5rc1s0XX0gaWQ9XCI1X2NhdGVnb3J5LWxpbmtcIiAgdHlwZT1cInRleHRcIj5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJiYW5uZXItc3JjXCI+0JDQtNGA0LXRgSDQutCw0YDRgtC40L3QutC4INCx0LDQvdC90LXRgNCwPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPSR7dG9wQmFubmVyLnNyY30gaWQ9XCJiYW5uZXItc3JjXCIgIHR5cGU9XCJ0ZXh0XCI+XG4gICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiaGVhZGluZy10aXRsZVwiPtCX0LDQs9C+0LvQvtCy0L7QuiDRgNCw0YHRgdGL0LvQutC4PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwiaGVhZGluZy10aXRsZVwiPiR7dG9wVGl0bGUudGV4dH08L3RleHRhcmVhPlxuICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbm5lckJ1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwicGFzdGVcIiBjbGFzcz1cImJ1dHRvblwiIHR5cGU9XCJzdWJtaXRcIj7QktGB0YLQsNCy0LjRgtGMPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNsZWFyXCIgY2xhc3M9XCJidXR0b25cIiB0eXBlPVwiYnV0dG9uXCI+0J7Rh9C40YHRgtC40YLRjDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ1bmRvXCIgY2xhc3M9XCJidXR0b25cIiB0eXBlPVwiYnV0dG9uXCI+0JLQtdGA0L3Rg9GC0Yw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8IS0tICAgICAgIE1VU1QgQkUgSElEREVOLCBET04nVCBUT1VDSCAgICAgICAgIC0tPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJkZWxldGVcIiBjbGFzcz1cImJ1dHRvbiBoaWRkZW5cIiB0eXBlPVwiYnV0dG9uXCI+0KPQtNCw0LvQuNGC0Yw8L2J1dHRvbj5cbiAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgIH07XG4gICAgICAgIGlmICghKGZyb21SZXNlcnZlZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZXNPYmogPSB7XG4gICAgICAgICAgICAgICAgdG9wTmF2TmFtZXM6IFtdLFxuICAgICAgICAgICAgICAgIHRvcE5hdkxpbmtzOiBbXSxcbiAgICAgICAgICAgICAgICB0b3BCYW5uZXI6IHtzcmM6IG51bGx9LFxuICAgICAgICAgICAgICAgIHRvcFRpdGxlOiB7dGV4dDogbnVsbH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQge3RvcE5hdk5hbWVzLCB0b3BOYXZMaW5rcywgdG9wQmFubmVyLCB0b3BUaXRsZX0gPSB2YWx1ZXNPYmo7XG4gICAgICAgICAgICB0b3BUaXRsZS50ZXh0ID0gb2JqLnRvcFRpdGxlLmlubmVyVGV4dDtcbiAgICAgICAgICAgIG9iai50b3BOYXYuZm9yRWFjaChhID0+IHtcbiAgICAgICAgICAgICAgICB0b3BOYXZOYW1lcy5wdXNoKGEuaW5uZXJUZXh0KTtcbiAgICAgICAgICAgICAgICB0b3BOYXZMaW5rcy5wdXNoKGEuaHJlZilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdG9wQmFubmVyLnNyYyA9IG9iai50b3BCYW5uZXIuc3JjO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGx1Z2luIGZvcm0nKS5pbm5lckhUTUwgPSBmb3JtKHZhbHVlc09iaik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgdmFsdWVzT2JqID0ge1xuICAgICAgICAgICAgICAgIHRvcE5hdk5hbWVzOiBvYmoudG9wTmF2LnRvcE5hdk5hbWVzLFxuICAgICAgICAgICAgICAgIHRvcE5hdkxpbmtzOiBvYmoudG9wTmF2LnRvcE5hdkxpbmtzLFxuICAgICAgICAgICAgICAgIHRvcEJhbm5lcjoge3NyYzogb2JqLnRvcEJhbm5lcn0sXG4gICAgICAgICAgICAgICAgdG9wVGl0bGU6IG9iai50b3BUaXRsZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlc09iaik7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGx1Z2luIGZvcm0nKS5pbm5lckhUTUwgPSBmb3JtKHZhbHVlc09iaik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZUVsZW1lbnRzID0gKCkgPT4ge1xuICAgICAgICAvLyBfX19fX19fX18gRk9SIEhBTkRMSU5HIFNFQ1RJT04tQlVUVE9OUyBDTElDS1MgX19fX19fX19fIC8vXG4gICAgICAgICgoKSA9PiB7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9wLWJ1dHRvbnMgLmJ1dHRvbicpO1xuICAgICAgICAgICAgc2VjdGlvbkJ1dHRvbnMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgZWwub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gISEhIFNUUklDVCBMSU5FUyBPUkRFUiAhISFcbiAgICAgICAgICAgICAgICAgICAgLy8gU0VUVElORyBUTyBTVEFURSBQUkVWSU9VUyBBTkQgQ1VSUkVOVCBCVVRUT05TXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50ID0gZ2xvYmFsU3RhdGUuZ2V0U3RhdGUoKS5jb21tb24uY3VycmVudFNlbGVjdGVkU2VjdGlvbkluZGV4O1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJldiA9IGdsb2JhbFN0YXRlLmdldFN0YXRlKCkuY29tbW9uLnByZXZTZWxlY3RlZFNlY3Rpb25JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU3RhdGUuc2V0U3RhdGUoJ2NvbW1vbicsICdwcmV2U2VsZWN0ZWRTZWN0aW9uSW5kZXgnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcocHJldilcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbFN0YXRlLnNldFN0YXRlKCdjb21tb24nLCAnY3VycmVudFNlbGVjdGVkU2VjdGlvbkluZGV4JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh0aGlzLmlkWzBdKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQUNUSVZFIEJVVFRPTiBUT0dHTElOR1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7cHJldn1fc2VjdGApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtwcmV2fV9zZWN0YCkuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBDT05UUk9MIEZPUk0gUkVOREVSSU5HXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5pZCA9PT0gXCJoZWFkaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckhlYWRpbmdGb3JtKGdsb2JhbFN0YXRlLmdldFN0YXRlKCkucGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRGb3JtSGVhZGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRm9ybVZhbHVlcygpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJGb3JtQ29tcG9uZW50KGdsb2JhbFN0YXRlLmdldFN0YXRlKCkucGFnZS5zZWN0aW9uc1t0aGlzLmlkWzBdXSwgcGFyc2VJbnQodGhpcy5pZFswXSkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvcm1DYXJkcyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvcm1CYW5uZXIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZvcm1WYWx1ZXMoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKCk7XG4gICAgfTtcbiAgICBjcmVhdGVFbGVtZW50cygpO1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFTEVNRU5UUyBDUkVBVElORyBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cbiAgICAvLyBGT1IgQUNUSVZBVEUgRk9STSBDT05UUk9MU1xuICAgIGNvbnN0IGluc2VydFZhbHVlc1RvUGFnZSA9ICh0eXBlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlID09PSAnc2VjdGlvbicpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50U2VjdGlvbkluZGV4ID0gZ2xvYmFsU3RhdGUuZ2V0U3RhdGUoKS5jb21tb24uY3VycmVudFNlbGVjdGVkU2VjdGlvbkluZGV4O1xuICAgICAgICAgICAgbGV0IHNlY3Rpb25PYmogPSBnbG9iYWxTdGF0ZS5nZXRTdGF0ZSgpLnBhZ2Uuc2VjdGlvbnNbY3VycmVudFNlY3Rpb25JbmRleF07XG4gICAgICAgICAgICBsZXQgZm9ybVZhbHVlcyA9IGdsb2JhbFN0YXRlLmdldFN0YXRlKCkuZm9ybTtcbiAgICAgICAgICAgIHNlY3Rpb25PYmouY2FyZHMuZm9yRWFjaCgoY2FyZCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmQuaW1nLnNyYyA9IGZvcm1WYWx1ZXMuY2FyZHNbaV0uaW1nO1xuICAgICAgICAgICAgICAgIGNhcmQubmFtZS5pbm5lclRleHQgPSBmb3JtVmFsdWVzLmNhcmRzW2ldLm5hbWU7XG4gICAgICAgICAgICAgICAgY2FyZC5uZXdQcmljZS5pbm5lclRleHQgPSBmb3JtVmFsdWVzLmNhcmRzW2ldLm5ld1ByaWNlICsgJyDQs9GA0L0nO1xuICAgICAgICAgICAgICAgIGNhcmQub2xkUHJpY2UuaW5uZXJUZXh0ID0gZm9ybVZhbHVlcy5jYXJkc1tpXS5vbGRQcmljZSArICcg0LPRgNC9JztcbiAgICAgICAgICAgICAgICBjYXJkLmxpbmtzLmZvckVhY2gobGluayA9PiBsaW5rLmhyZWYgPSBmb3JtVmFsdWVzLmNhcmRzW2ldLmhyZWYud2l0aFVUTSgpKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkxpbmsgPSBmb3JtVmFsdWVzLmJhbm5lci5saW5rLndpdGhVVE0oKTtcbiAgICAgICAgICAgIHNlY3Rpb25PYmouYmFubmVyLmhyZWYgPSBzZWN0aW9uTGluay53aXRoVVRNKCk7XG4gICAgICAgICAgICBzZWN0aW9uT2JqLmJvdHRvbUJ1dHRvbi5ocmVmID0gc2VjdGlvbkxpbmsud2l0aFVUTSgpO1xuICAgICAgICAgICAgc2VjdGlvbk9iai5iYW5uZXIucXVlcnlTZWxlY3RvcignaW1nJykuc3JjID0gZm9ybVZhbHVlcy5iYW5uZXIuc3JjO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdoZWFkaW5nJykge1xuICAgICAgICAgICAgbGV0IHt0b3BOYXYsIHRvcEJhbm5lciwgdG9wVGl0bGV9ID0gZ2xvYmFsU3RhdGUuZ2V0U3RhdGUoKS5wYWdlO1xuICAgICAgICAgICAgbGV0IGZvcm1WYWx1ZXMgPSBnbG9iYWxTdGF0ZS5nZXRTdGF0ZSgpLmZvcm0uaGVhZGluZztcbiAgICAgICAgICAgIHRvcE5hdi5mb3JFYWNoKChlbCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGVsLmlubmVyVGV4dCA9IGZvcm1WYWx1ZXMudG9wTmF2LnRvcE5hdk5hbWVzW2ldO1xuICAgICAgICAgICAgICAgIGVsLmhyZWYgPSBmb3JtVmFsdWVzLnRvcE5hdi50b3BOYXZMaW5rc1tpXS53aXRoVVRNKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRvcEJhbm5lci5zcmMgPSBmb3JtVmFsdWVzLnRvcEJhbm5lcjtcbiAgICAgICAgICAgIHRvcFRpdGxlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lclRleHQgPSBmb3JtVmFsdWVzLnRvcFRpdGxlLnRleHQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZUtleU5hbWVzRnJvbUlkID0gKGlucHV0cywgb2JqVG9Qb3B1bGF0ZSkgPT4ge1xuICAgICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICBsZXQga2V5TmFtZUZyb21JZCA9IGAke2lucHV0LmlkLnNwbGl0KCctJylbMV19YDtcbiAgICAgICAgICAgIG9ialRvUG9wdWxhdGVba2V5TmFtZUZyb21JZF0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBsZXQgc2V0Rm9ybUJhbm5lciA9ICh3aXRoUmVzZXJ2ZSkgPT4ge1xuICAgICAgICAvLyBQQVJTRSBCQU5ORVIgRk9STSBJTlBVVFMgQU5EIFNFVCBUSEVNIFRPIFNUQVRFXG4gICAgICAgIGxldCBiYW5uZXJPYmogPSB7fTtcbiAgICAgICAgbGV0IGJhbm5lcklucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNwbHVnaW4gI2Jhbm5lciBpbnB1dCcpO1xuICAgICAgICBnbG9iYWxTdGF0ZS5zZXRTdGF0ZSgnZm9ybScsICdiYW5uZXInLCAoKSA9PiB7XG4gICAgICAgICAgICBjcmVhdGVLZXlOYW1lc0Zyb21JZChiYW5uZXJJbnB1dHMsIGJhbm5lck9iaik7XG4gICAgICAgICAgICBpZiAod2l0aFJlc2VydmUgPT09IHRydWUpIGdsb2JhbFN0YXRlLnN0YXRlLmZvcm0ucmVzZXJ2ZWQuc2VjdGlvbi5iYW5uZXIgPSBiYW5uZXJPYmo7XG4gICAgICAgICAgICByZXR1cm4gYmFubmVyT2JqO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGxldCBzZXRGb3JtQ2FyZHMgPSAod2l0aFJlc2VydmUpID0+IHtcbiAgICAgICAgLy8gUEFSU0UgUFJPRFVDVCBDQVJEUyBGT1JNIElOUFVUUyBBTkQgU0VUIFRIRU0gVE8gU1RBVEVcbiAgICAgICAgbGV0IHZhbHVlcyA9IFtdO1xuICAgICAgICBsZXQgZm9ybUNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3BsdWdpbiAuZm9ybS1jYXJkJyk7XG4gICAgICAgIGZvcm1DYXJkcy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGxldCBpbnB1dHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgdGV4dGFyZWEnKTtcbiAgICAgICAgICAgIGdsb2JhbFN0YXRlLnNldFN0YXRlKCdmb3JtJywgJ2NhcmRzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBjYXJkID0ge307XG4gICAgICAgICAgICAgICAgY3JlYXRlS2V5TmFtZXNGcm9tSWQoaW5wdXRzLCBjYXJkKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChjYXJkKTtcbiAgICAgICAgICAgICAgICBpZiAod2l0aFJlc2VydmUgPT09IHRydWUpIGdsb2JhbFN0YXRlLnN0YXRlLmZvcm0ucmVzZXJ2ZWQuc2VjdGlvbi5jYXJkcyA9IHZhbHVlcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgbGV0IHNldEZvcm1IZWFkaW5nID0gKHdpdGhSZXNlcnZlKSA9PiB7XG4gICAgICAgIGxldCBoZWFkaW5nT2JqID0ge1xuICAgICAgICAgICAgdG9wTmF2OiB7XG4gICAgICAgICAgICAgICAgdG9wTmF2TmFtZXM6IFtdLFxuICAgICAgICAgICAgICAgIHRvcE5hdkxpbmtzOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvcEJhbm5lcjogbnVsbCxcbiAgICAgICAgICAgIHRvcFRpdGxlOiB7dGV4dDogbnVsbH1cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGNhdGVnb3JpZXNTZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3BsdWdpbl9mb3JtIGRpdltpZCQ9XCJfY2F0XCJdJyk7XG4gICAgICAgIGdsb2JhbFN0YXRlLnNldFN0YXRlKCdmb3JtJywgJ2hlYWRpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBjYXRlZ29yaWVzU2V0cy5mb3JFYWNoKHNldCA9PiB7XG4gICAgICAgICAgICAgICAgc2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LCB0ZXh0YXJlYScpLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQuaWQuaW5jbHVkZXMoJ25hbWUnKSkgaGVhZGluZ09iai50b3BOYXYudG9wTmF2TmFtZXMucHVzaChmaWVsZC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpZWxkLmlkLmluY2x1ZGVzKCdsaW5rJykpIGhlYWRpbmdPYmoudG9wTmF2LnRvcE5hdkxpbmtzLnB1c2goZmllbGQudmFsdWUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGVhZGluZ09iai50b3BCYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGx1Z2luX2Zvcm0gI2Jhbm5lci1zcmMnKS52YWx1ZTtcbiAgICAgICAgICAgIGhlYWRpbmdPYmoudG9wVGl0bGUudGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbHVnaW5fZm9ybSAjaGVhZGluZy10aXRsZScpLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHdpdGhSZXNlcnZlID09PSB0cnVlKSBnbG9iYWxTdGF0ZS5zdGF0ZS5mb3JtLnJlc2VydmVkLmhlYWRpbmcgPSBoZWFkaW5nT2JqO1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRpbmdPYmo7XG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBsZXQgcGFyc2VGb3JtVmFsdWVzID0gKCkgPT4ge1xuICAgICAgICBpZiAoZ2xvYmFsU3RhdGUuZ2V0U3RhdGUoKS5jb21tb24uY3VycmVudFNlbGVjdGVkU2VjdGlvbkluZGV4ID09PSAnaCcpIHtcbiAgICAgICAgICAgIHNldEZvcm1IZWFkaW5nKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEZvcm1CYW5uZXIoZmFsc2UpO1xuICAgICAgICAgICAgc2V0Rm9ybUNhcmRzKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGx1Z2luX2Zvcm0nKS5vbnN1Ym1pdCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHBhcnNlRm9ybVZhbHVlcygpO1xuICAgICAgICAgICAgaWYgKGdsb2JhbFN0YXRlLmdldFN0YXRlKCkuY29tbW9uLmN1cnJlbnRTZWxlY3RlZFNlY3Rpb25JbmRleCA9PT0gXCJoXCIpIHtcbiAgICAgICAgICAgICAgICBzZXRGb3JtSGVhZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgaW5zZXJ0VmFsdWVzVG9QYWdlKCdoZWFkaW5nJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldEZvcm1CYW5uZXIoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldEZvcm1DYXJkcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgaW5zZXJ0VmFsdWVzVG9QYWdlKCdzZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbHVnaW5fZm9ybSAjdW5kbycpLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZ2xvYmFsU3RhdGUuZ2V0U3RhdGUoKS5jb21tb24uY3VycmVudFNlbGVjdGVkU2VjdGlvbkluZGV4ID09PSBcImhcIikge1xuICAgICAgICAgICAgICAgIGxldCByZXNlcnZlZCA9IGdsb2JhbFN0YXRlLmdldFN0YXRlKCkuZm9ybS5yZXNlcnZlZC5oZWFkaW5nO1xuICAgICAgICAgICAgICAgIHJlbmRlckhlYWRpbmdGb3JtKHJlc2VydmVkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBwYXJzZUZvcm1WYWx1ZXMoKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzZXJ2ZWQgPSBnbG9iYWxTdGF0ZS5nZXRTdGF0ZSgpLmZvcm0ucmVzZXJ2ZWQ7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRTZWN0aW9uID0gTnVtYmVyKGdsb2JhbFN0YXRlLmdldFN0YXRlKCkuY29tbW9uLmN1cnJlbnRTZWxlY3RlZFNlY3Rpb25JbmRleCkgKyAxO1xuICAgICAgICAgICAgICAgIHJlbmRlckZvcm1Db21wb25lbnQocmVzZXJ2ZWQsIGN1cnJlbnRTZWN0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBwYXJzZUZvcm1WYWx1ZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsdWdpbl9mb3JtICNjbGVhcicpLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcGx1Z2luX2Zvcm0gaW5wdXQsIHRleHRhcmVhJylcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChmaWVsZCA9PiBmaWVsZC52YWx1ZSA9IG51bGwpXG4gICAgICAgIH07XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbHVnaW5fZm9ybSAjZGVsZXRlJykub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGxldCBzZWN0aW9ucyA9IGdsb2JhbFN0YXRlLmdldFN0YXRlKCkucGFnZS5zZWN0aW9ucztcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZFNlY3Rpb24gPSBnbG9iYWxTdGF0ZS5nZXRTdGF0ZSgpLmNvbW1vbi5jdXJyZW50U2VsZWN0ZWRTZWN0aW9uSW5kZXg7XG4gICAgICAgICAgICBzZWN0aW9uc1tzZWxlY3RlZFNlY3Rpb25dLmFsbFNlY3Rpb25UcnMuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvcC1idXR0b25zIC5zZWN0aW9uLWJ1dHRvblwiKS5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGJ0bi5pZFswXSA9PT0gc2VsZWN0ZWRTZWN0aW9uKSBidG4ucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgfTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29weV9odG1sJykub25jbGljayA9IGFzeW5jIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pbm5lclRleHQgPSAn0JrQvtC/0LjRgNGD0LXQvC4uLic7XG4gICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFibGVfcm9vdCcpLmlubmVySFRNTCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUGFnZSBVUkwgY29waWVkIHRvIGNsaXBib2FyZCcpO1xuICAgICAgICAgICAgdGhpcy5pbm5lclRleHQgPSAnSFRNTCDRg9GB0L/QtdGI0L3QviDRgdC60L7Qv9C40YDQvtCy0LDQvSDQsiDQsdGD0YTQtdGAJztcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY29weTogJywgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5QbHVnaW4oKTtcblxuIl19
